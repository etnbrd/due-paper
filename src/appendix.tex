% \vfill\eject
\appendix

\section{Evaluation results} \label{section:results}

On the 64 projects composing the test set
\begin{description}
\item[29] (45.3\%) do not contain any compatible continuations,
\item[10] (15.6\%) are not compilable because they contain \texttt{with} or \texttt{eval} statements,
\item[5] (7.8\%) use less common asynchronous libraries we didn't filter previously,
\item[4] (6.3\%) are not syntactically correct,
\item[4] (6.3\%) fail their tests before the compilation,
\item[3] (4.7\%) are not tested, and
\item[10] (14.0\%) compile successfully.
\end{description}
The compiler do not fail to compile any project.

\begin{figure}[h!]
\begin{tikzpicture}
[
    pie chart,
    slice type={nocont}{gray1},
    slice type={eval}{gray2},
    slice type={lib}{gray3},
    slice type={err}{gray4},
    slice type={fail}{gray5},
    slice type={notest}{gray6},
    slice type={ok}{red},
    pie values/.style={font={\small}},
    scale=2
]

\pie{}{%
  45.3/nocont,%
  15.6/eval,%
  7.8/lib,%
  6.3/err,%
  6.3/fail,%
  4.7/notest,%
  14.0/ok%
}

\legend[shift={(1.3cm,0.9cm)}]{%
  {No continuations}/nocont,%
  {\texttt{with} or \texttt{eval} statments}/eval,%
  {Promises libraries}/lib,%
  {Syntax errors}/err,%
  {Tests fail before compilation}/fail,%
  {Not tested}/notest,%
  {Compiled}/ok%
}
\end{tikzpicture}
\caption{Compilation results distribution}
\end{figure}

29 projects contain no compatible continuation.\\
\begin{tabularx}{\linewidth}{>{\ttfamily} X r}
\hline
app-json-fetcher                      & \comment{release 2.1.0} \\
brokowski                             & \comment{release 0.1.8} \\
claus                                 & \comment{release 0.0.2} \\
code-connect-server                   & \comment{release 0.1.7} \\
costa                                 & \comment{release 0.5.0} \\
csp-endpoint                          & \comment{release 0.0.1} \\
express-device                        & \comment{release 0.3.11} \\
express-resource-plus                 & \comment{release 0.2.1} \\
fizzbuzz-hypermedia-server            & \comment{release 0.1.2} \\
flair-doc                             & \comment{release 0.1.0} \\
generator-wikismith                   & \comment{release 0.2.2} \\
glsl-transition-minify                & \comment{release 0.3.1} \\
heroku-proxy                          & \comment{release 2.1.1} \\
http-test-servers                     & \comment{release 0.0.12} \\
jellyjs-plugin-httpserver             & \comment{release 0.0.8} \\
loopback-angular-cli                  & \comment{release 1.1.1} \\
loopback-explorer                     & \comment{release 1.6.4} \\
moby                                  & \comment{release 1.1.1} \\
monami                                & \comment{release 0.0.21} \\
mongoose-epxress-resource             & \comment{release 0.1.2} \\
nodebootstrap-server                  & \comment{release 1.1.2} \\
oauth-express                         & \comment{release 0.0.1} \\
public-server                         & \comment{release 2.0.1} \\
scrapit                               & \comment{release 0.0.4} \\
sik                                   & \comment{release 0.0.1} \\
sonea                                 & \comment{release 0.0.3} \\
squirrel-server                       & \comment{release 0.0.1} \\
vsoft-explorer                        & \comment{release 0.2.1} \\
webs-weeia                            & \comment{release 0.2.2} \\
\end{tabularx}

10 projects contain \texttt{eval} or \texttt{with} statements.\\
\begin{tabularx}{\linewidth}{>{\ttfamily} X r}
\hline
adnoce                                & \comment{release 1.1.2} \\
arkhaios                              & \comment{release 0.2.0} \\
browserman                            & \comment{release 0.1.2} \\
infectwit                             & \comment{release 0.0.1} \\
ldapp                                 & \comment{release 0.1.4} \\
levelhud                              & \comment{release 0.1.3} \\
manet                                 & \comment{release 0.3.2} \\
solid                                 & \comment{release 0.2.1} \\
swac                                  & \comment{release 0.12.1} \\
swac-odm                              & \comment{release 0.2.1} \\
\end{tabularx}

5 projects already use asynchronous frameworks.\\
\begin{tabularx}{\linewidth}{>{\ttfamily} X l r}
\hline
boomerang-server       & es6-promise  & \comment{release 0.0.1} \\
hyper.io               & when         & \comment{release 0.2.0} \\
lanetix-microservice   & bluebird     & \comment{release 1.4.6} \\
librarian              & bluebird     & \comment{release 1.1.1} \\
webtasks               & subtask      & \comment{release 0.0.3} \\
\end{tabularx}

4 projects fail their tests before the compilation.\\
\begin{tabularx}{\linewidth}{>{\ttfamily} X r}
\hline
express-orm-mvc                       & \comment{release 1.1.0} \\
derpjs                                & \comment{release 0.2.2} \\
hangout                               & \comment{release 0.0.3} \\
ord.zeke.xxx                          & \comment{release 1.0.0} \\
\end{tabularx}

3 projects do not provide tests.\\
\begin{tabularx}{\linewidth}{>{\ttfamily} X r}
\hline
inchi-server                          & \comment{release 0.0.1} \\
otwo                                  & \comment{release 0.0.1} \\
tuzi                                  & \comment{release 0.1.5} \\
\end{tabularx}

9 projects successfully compile.\\
\begin{tabularx}{\linewidth}{>{\ttfamily} X r}
\hline
express-user-couchdb                  & \comment{release 0.3.5} \\
express-endpoint                      & \comment{release 1.2.11} \\
gifsockets-server                     & \comment{release 0.38.1} \\
heroku-bouncer                        & \comment{release 4.0.1} \\
moonridge                             & \comment{release 0.6.9} \\
redis-key-overview                    & \comment{release 0.0.3} \\
slack-integrator                      & \comment{release 0.0.6} \\
timbits                               & \comment{release 0.7.3} \\
tingo-rest                            & \comment{release 1.0.1} \\
\end{tabularx}

The compiler detected 172 callbacks, 52 of them turned out to be compatible continuations.

\begin{tabularx}{\linewidth}{>{\ttfamily} X r r r r r r }
                                      & \multicolumn{2}{c}{continuations}      & \multicolumn{4}{c}{chains length}\\
name                                  & total              & compiled          & 1  & 2 & 3 & 4 \\
\hline
\texttt{express-user-couchdb}         & 40                 & 20                & 9  & 2 & 1 & 1 \\
\texttt{express-endpoint}             & 19                 & 2                 & 2              \\
\texttt{gifsockets-server}            & 3                  & 1                 & 1  &           \\ 
\texttt{heroku-bouncer}               & 7                  & 3                 & 3  &           \\
\texttt{moonridge}                    & 37                 & 6                 & 2  & 2         \\
\texttt{redis-key-overview}           & 14                 & 9                 & 6  &   & 1     \\
\texttt{slack-integrator}             & 6                  & 3                 & 1  & 1         \\
\texttt{timbits}                      & 34                 & 8                 & 8              \\
\texttt{tingo-rest}                   & 12                 & 4                 & 4              \\
\hline
total                                 & 172                & 54                & 36 & 5 & 2 & 1 \\
\end{tabularx}

\vfill\eject

In the following tables, are the name of the callee for each continuations, grouped by package.

\begin{tabularx}{\linewidth}{>{\ttfamily} X | >{\ttfamily} l}
\multirow{2}{*}{express-endpoint}%
                                      & \texttt{ruleFn} \\
                                      & \texttt{parseParams} \\
\multicolumn{2}{c}{}\\
\multirow{9}{*}{express-user-couchdb}%
                                      & \texttt{config.validateUser} \\
                                      & \texttt{createSession} \\
                                      & \texttt{db.destroy} \\
                                      & \texttt{db.get} \comment{$\times5$}\\
                                      % & \texttt{db.get} \\
                                      % & \texttt{db.get} \\
                                      % & \texttt{db.get} \\
                                      % & \texttt{db.get} \\
                                      & \texttt{db.insert} \comment{$\times5$}\\
                                      % & \texttt{db.insert} \\
                                      % & \texttt{db.insert} \\
                                      % & \texttt{db.insert} \\
                                      % & \texttt{db.insert} \\
                                      & \texttt{db.view} \comment{$\times3$}\\
                                      % & \texttt{db.view} \\
                                      % & \texttt{db.view} \\
                                      & \texttt{getUserName} \\
                                      & \texttt{lookupUser} \\
                                      & \texttt{req.session.destroy} \comment{$\times2$}\\
                                      % & \texttt{req.session.destroy} \\
\multicolumn{2}{c}{}\\
\multirow{1}{*}{gifsockets-server}%
                                      & \texttt{getRawBody} \\
\multicolumn{2}{c}{}\\
\multirow{3}{*}{heroky-bouncer}%
                                      & \texttt{ensureValidToken} \\
                                      & \texttt{oauth.getOAuthAccessToken} \\
                                      & \texttt{request.post} \\
\multicolumn{2}{c}{}\\
\multirow{5}{*}{moonridge}%
                                      & \texttt{doc.remove} \\
                                      & \texttt{doc.save} \\
                                      & \texttt{model.findById} \comment{$\times2$}\\
                                      % & \texttt{model.findById} \\
                                      & \texttt{mongoose.connect} \\
                                      & \texttt{populateWithClientQuery} \\
\multicolumn{2}{c}{}\\
\multirow{6}{*}{redis-key-overview}%
                                      & \texttt{exec} \comment{$\times2$}\\
                                      % & \texttt{exec} \\
                                      & \texttt{execstderr} \\
                                      & \texttt{fs.unlink} \\
                                      & \texttt{fs.writeFile} \comment{$\times2$}\\
                                      % & \texttt{fs.writeFile} \\
                                      & \texttt{request.post} \\
                                      & \texttt{res.sendfile} \comment{$\times3$}\\
                                      % & \texttt{res.sendfile} \\
                                      % & \texttt{res.sendfile} \\
\multicolumn{2}{c}{}\\
\multirow{3}{*}{slack-integrator}%
                                      & \texttt{config.payload} \\
                                      & \texttt{sendPayload} \\
                                      & \texttt{request} \\
\multicolumn{2}{c}{}\\
\multirow{5}{*}{timbits}%
                                      & \texttt{loadTimbits} \\
                                      & \texttt{res.render} \\
                                      & \texttt{timbit.test} \comment{$\times2$}\\
                                      % & \texttt{timbit.test} \\
                                      & \texttt{timbits.pantry.fetch} \comment{$\times2$}\\
                                      % & \texttt{timbits.pantry.fetch} \\
                                      & \texttt{request} \\
\multicolumn{2}{c}{}\\
\multirow{4}{*}{tingo-rest}%
                                      & \texttt{req.collection.findOne} \\
                                      & \texttt{req.collection.insert} \\
                                      & \texttt{req.collection.update} \\
                                      & \texttt{req.collection.remove} \\
\end{tabularx}{}





% \section{Due implementation} \label{section:dueimpl}

% We present the implementation of Due in listing \ref{lst:dueimpl}, with a small set of test cases in listing \ref{lst:testdueimpl}.

% \includecode{js, %
%              caption={Implementation of Due}, %
%              label={lst:dueimpl}
%              }
%              {../../due/src/index.js}


% \includecode{js, %
%              caption={Tests for the implementation of Due}, %
%              label={lst:testdueimpl}
%              }
%              {../../due/test/index.js}